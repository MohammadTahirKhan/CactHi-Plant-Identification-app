<%- include('./partials/header.ejs') %>

<h1><%= title %></h1>
<p>Welcome to <%= title %></p>

<label for="name" id="nameLabel">Enter Name:</label>
<input type="text" id="name" name="name"><br><br>
<label for="roomNo" style="display: none">RoomNo:</label>
<input type="text" id="roomNo" name="roomNo" style="display: none"><br><br>

<p id="roomNo">Room ID</p>
<div id="plant_list">
<% data.forEach(plant => { %>
    <p><strong>Name:</strong> <%= plant.name%></p>
    <p><strong>Height</strong> <%= plant.height %></p>
    <button id="connect" onclick="connectToRoom('<%= plant._id%>','<%= plant.chat%>')">Connect</button>
    <hr>
    <% }); %>
    <hr>
</div>

<div id="chat_interface" style="display: none">
  <div>
    <div id="who_you_are" style="display: inline"></div>, you are in room: <div id="in_room" style="display: inline"></div>
  </div>
  <div id="history" class="boxed"></div>
  <div id="input" class="bottom boxed">
    <form onsubmit="return false;" style="width: 100%">
      <p>

        <input type="text" id="chat_input" name="chat_input" style="width: 80%">
        <button id="chat_send" onclick="sendChatText()">Send</button>
      </p>
    </form>
  </div>
</div>


<form action="/changeChat" method="POST" enctype="application/x-www-form-urlencoded">
  <input type="text" id="historyChat" name="historyChat" style="display: none">
  <button id="BackButton" type="submit" style="display: none">Back</button>
</form>

<%- include('./partials/footer.ejs') %>
